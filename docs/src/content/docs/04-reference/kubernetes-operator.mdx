---
title: Kubernetes Operator
description: Lorem ipsum dolor sit amet, consectetur adipiscing elit.
permalink: kubernetes-operator
icon: lucide:box
order: 1
---

## ‚ú® Fonctionnalit√©s
- Provisionnement automatique de:
    - Cluster PostgreSQL via CloudNative PostgreSQL
    - Backend (API Rust)
    - Frontend (React)
- D√©ploiement configurable via une ressource `FerriskeyCluster`
- Nettoyage automatique des ressources li√©s lors de la suppression du cluster.
- Synchronisation automatique des ressources (Deployments/Services) sont supprim√©es manuellement.

## üß∞ Pr√©requis
- Kubernetes 1.24+
- Helm 3+

## üöÄ Installation

### 1. Installer l'op√©rateur CloudNativePG (si non pr√©sent)

```
kubectl apply -f https://raw.githubusercontent.com/cloudnative-pg/cloudnative-pg/release-1.21/releases/cnpg-1.21.1.yaml
```

### 2. Installer le chart Helm de l'op√©rateur FerrisKey

```
helm install ferriskey-operator oci://ghcr.io/ferriskey/charts/ferriskey-operator --version 0.1.0
```

## üñäÔ∏è Utilisation

### Cr√©er une ressource FerriskeyCluster

```
apiVersion: ferriskey.io/v1
kind: FerriskeyCluster
metadata:
  name: ferriskey
spec:
  version: "latest"
  frontend:
    enabled: true
  backend:
    replicas: 2
    username: admin
    password: admin
    email: admin@ferriskey.fr
    allowedOrigins: "http://localhost:3000"
  postgres:
    image: ghcr.io/cloudnative-pg/postgresql:16
    storage: 5Gi
```

```
kubectl apply -f ferriskey-cluster.yaml
```

### V√©rifier les ressources cr√©√©es

```
kubectl get deployments -l app=ferriskey
kubectl get services -l app=ferriskey
kubectl get cluster.postgresql.cnpg.io
```

### Supprimer le cluster Ferriskey

```
kubectl delete ferriskeyclsuters.ferriskey.io ferriskey
```

Cela d√©truira automatiquement le frontend, l'API et la base PostgreSQL associ√©e.